(function(t){function e(e){for(var s,i,o=e[0],u=e[1],c=e[2],d=0,f=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(t[s]=u[s]);l&&l(e);while(f.length)f.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var u=a[o];0!==r[u]&&(s=!1)}s&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},r={app:0},n=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"02db":function(t,e,a){"use strict";a("3f6a")},"034f":function(t,e,a){"use strict";a("85ec")},"3f6a":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid",attrs:{id:"app"}},[a("h1",[t._v("Kaitai Struct CI")]),a("form",{attrs:{id:"search"}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filterTest,expression:"filterTest"}],staticClass:"form-control",attrs:{name:"filterTest",placeholder:"Search test..."},domProps:{value:t.filterTest},on:{input:function(e){e.target.composing||(t.filterTest=e.target.value)}}})]),a("div",{staticClass:"form-group col-md-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filterTarget,expression:"filterTarget"}],staticClass:"form-control",attrs:{name:"filterTarget",placeholder:"Search target..."},domProps:{value:t.filterTarget},on:{input:function(e){e.target.composing||(t.filterTarget=e.target.value)}}})]),a("div",{staticClass:"col-md-4 options-column"},[a("label",{staticClass:"checkbox-inline",attrs:{for:"only-failures-checkbox"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.skipPassed,expression:"skipPassed"}],attrs:{type:"checkbox",id:"only-failures-checkbox"},domProps:{checked:Array.isArray(t.skipPassed)?t._i(t.skipPassed,null)>-1:t.skipPassed},on:{change:function(e){var a=t.skipPassed,s=e.target,r=!!s.checked;if(Array.isArray(a)){var n=null,i=t._i(a,n);s.checked?i<0&&(t.skipPassed=a.concat([n])):i>-1&&(t.skipPassed=a.slice(0,i).concat(a.slice(i+1)))}else t.skipPassed=r}}}),t._v(" Only failures ")]),a("label",{staticClass:"checkbox-inline",attrs:{for:"group-by-lang"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.groupByLang,expression:"groupByLang"}],attrs:{type:"checkbox",id:"group-by-lang"},domProps:{checked:Array.isArray(t.groupByLang)?t._i(t.groupByLang,null)>-1:t.groupByLang},on:{change:function(e){var a=t.groupByLang,s=e.target,r=!!s.checked;if(Array.isArray(a)){var n=null,i=t._i(a,n);s.checked?i<0&&(t.groupByLang=a.concat([n])):i>-1&&(t.groupByLang=a.slice(0,i).concat(a.slice(i+1)))}else t.groupByLang=r}}}),t._v(" Group columns by language ")])])])]),a("ci-grid",{attrs:{data:t.groupedGridData,columns:t.groupedGridColumns,meta:t.groupedGridMeta,"filter-key":t.filterTest,"filter-columns-key":t.filterTarget,"skip-passed":t.skipPassed,"group-by-lang":t.groupByLang}})],1)},n=[],i=a("3835"),o=(a("d3b7"),a("dca8"),a("a630"),a("3ca3"),a("6062"),a("ddb0"),a("d81d"),a("ac1f"),a("1276"),a("4e82"),a("b64b"),a("159b"),a("7db0"),a("4fadc"),a("d9e2"),a("b0c0"),a("c740"),a("a15b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"table table-fixed"},[a("thead",[a("tr",{staticClass:"row-sticky-top"},[a("th",[t._v("Test \\ Target")]),t._l(t.filteredColumns,(function(e,s){return a("th",{key:s,class:{active:t.sortKey===e},on:{click:function(a){return t.sortBy(e)}}},[t._v(" "+t._s(e.replace("/"," "))+" "),a("span",{staticClass:"arrow",class:t.sortOrders[e]>0?"asc":"dsc"})])}))],2),a("tr",[a("th",[t._v("Last update")]),t._l(t.filteredColumns,(function(e,s){return a("th",{key:s},[t._v(" "+t._s(t._f("humanTime")(t.meta[e].timestamp))+" "),t.meta[e].ci?a("a",{staticClass:"ext-link",attrs:{href:t.meta[e].ci.url}},[t._v("Job")]):t._e(),a("a",{staticClass:"ext-link",attrs:{href:t.meta[e].artifactsUrl}},[t._v("Artifacts")])])}))],2),a("tr",[a("th",[t._v("Rating")]),t._l(t.filteredColumns,(function(e,s){return a("th",{key:s},[t._v(" "+t._s(t.passRating[e])+"% ")])}))],2)]),a("tbody",t._l(t.filteredData,(function(e){return a("tr",{key:e.name},[a("td",[t._v(t._s(e.name))]),t._l(t.filteredColumns,(function(t){return a("ci-cell",{key:e.name+"/"+t,attrs:{data:e[t]||{}}})}))],2)})),0),a("tfoot",[a("tr",[a("th",[t._v("KST adoption")]),t._l(t.filteredColumns,(function(e){return a("th",{key:e},[t._v(" "+t._s(t.kstRating[e])+"% ")])}))],2)])])}),u=[],c=(a("4de4"),a("fb6a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{class:t.cssClassObject,style:t.mixedBgGradientStyle,on:{click:function(e){t.details=!t.details}}},[t._v(" "+t._s(t.data.status||"unknown")+" "),t.details&&t.hasDetails?a("div",{staticClass:"add-info",on:{click:function(t){t.stopPropagation()}}},t._l(t.results,(function(e,s){return a("div",{key:s,staticClass:"result"},[a("h4",{class:[t.getCssClassByStatus(e.status,t.data.is_kst)]},[e.variant_names?a("span",[t._v(t._s(e.variant_names.join(", "))+": ")]):t._e(),a("strong",[t._v(t._s(e.status))])]),e.failure?a("div",{staticClass:"failure-info"},[e.failure.message?[t._v(" Message: "),a("pre",[t._v(t._s(e.failure.message))])]:t._e(),e.failure.trace?[t._v(" Stack trace: "),a("pre",[t._v(t._s(e.failure.trace))])]:t._e()],2):t._e()])})),0):t._e()])}),l=[],d=(a("0481"),a("4069"),a("b680"),Object.freeze({passed:"#dff0d8","passed-kst":"#82dc75",skipped:"#b9cfbb",failed:"#f2dede",leak:"#f2cece","no-spec":"#f2bebe"})),f={name:"CiCell",props:{data:Object},data:function(){return{details:!1}},computed:{results:function(){return this.data.agg_results||[this.data]},hasDetails:function(){return!!this.data.failure||"mixed"===this.data.status},mixedBgGradientStyle:function(){var t=this;if("mixed"!==this.data.status)return{};var e=10,a=Array.from(this.data.agg_status_set,(function(a,s){var r=t.getStatusColorByCssClass(t.getCssClassByStatus(a,t.data.is_kst));return[r+" "+(s*e).toFixed(0)+"px",r+" "+((s+1)*e).toFixed(0)+"px"]})).flat();return{backgroundImage:"repeating-linear-gradient(135deg, "+a.join(", ")+")"}},cssClassObject:function(){var t={"has-details":this.hasDetails},e=this.getCssClassByStatus(this.data.status,this.data.is_kst);return e&&(t[e]=!0),t}},methods:{getCssClassByStatus:function(t,e){return"passed"===t&&e?"passed-kst":["passed","failed","leak"].indexOf(t)>-1?t:void 0===t?"no-spec":void 0},getStatusColorByCssClass:function(t){return Object.prototype.hasOwnProperty.call(d,t)?d[t]:"transparent"}}},p=f,g=(a("d731"),a("2877")),h=Object(g["a"])(p,c,l,!1,null,"b5c690f0",null),m=h.exports,v={name:"CiGrid",components:{CiCell:m},props:{data:Array,columns:Array,meta:Object,filterKey:String,filterColumnsKey:String,skipPassed:Boolean},data:function(){var t={};return this.columns.forEach((function(e){t[e]=1})),{sortKey:"name",sortOrders:t}},computed:{filteredData:function(){var t=this,e=this.sortKey,a=this.filterKey&&this.filterKey.toLowerCase(),s=this.sortOrders[e]||1,r=this.data;if(a&&(r=r.filter((function(e){return t.strContainsCaseInsensitive(String(e.name),a)}))),this.skipPassed){var n=this.filteredColumns;r=r.filter((function(t){return!n.every((function(e){return"name"===e||t[e]&&"passed"===t[e].status}))}))}return e&&(r=r.slice().sort((function(t,a){return t=t[e],a=a[e],(t===a?0:t>a?1:-1)*s}))),r},filteredColumns:function(){if(this.filterColumnsKey&&""!==this.filterColumnsKey){var t=this.filterColumnsKey.toLowerCase();return this.columns.filter((function(e){return e.toLowerCase().indexOf(t)>-1}))}return this.columns},passRating:function(){var t={};for(var e in this.meta)t[e]=Math.round(this.meta[e].passed/this.data.length*100*10)/10;return t},kstRating:function(){var t={};for(var e in this.meta)t[e]=Math.round(this.meta[e].kst/this.data.length*100*10)/10;return t}},filters:{capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},humanTime:function(t){var e=(new Date-t)/1e3;return e<60?"just now":e<3600?Math.round(e/60)+"m ago":e<86400?Math.round(e/3600)+"h ago":Math.round(e/86400)+"d ago"}},methods:{sortBy:function(t){this.sortKey=t,this.sortOrders[t]=-1*this.sortOrders[t]},strContainsCaseInsensitive:function(t,e){return t.toLowerCase().indexOf(e)>-1}}},_=v,y=(a("02db"),Object(g["a"])(_,o,u,!1,null,"09dd984d",null)),b=y.exports,k=[["cpp_stl_98","gcc4.8_linux"],["cpp_stl_98","clang3.5_linux"],["cpp_stl_98","clang7.3_osx"],["cpp_stl_98","msvc141_windows_x64"],["cpp_stl_11","gcc4.8_linux"],["cpp_stl_11","clang3.5_linux"],["cpp_stl_11","clang7.3_osx"],["cpp_stl_11","msvc141_windows_x64"],["csharp","mono5.18.0"],["csharp","net45_windows"],["csharp","netcore2.2.103_linux"],["csharp","netcore3.0.100_linux"],["graphviz","2.36"],["go","1.13"],["java","openjdk7"],["java","oraclejdk8"],["java","openjdk11"],["java","openjdk17"],["javascript","nodejs4"],["javascript","nodejs8"],["javascript","nodejs10"],["javascript","nodejs12"],["javascript","nodejs16"],["lua","5.3"],["nim","1.6.0"],["perl","5.24"],["perl","5.32"],["php","7.1"],["php","8.0"],["python","2.7"],["python","3.4"],["python","3.10"],["construct","python2.7"],["construct","python3.4"],["construct","python3.10"],["ruby","1.9"],["ruby","2.3"],["ruby","3.0"]];k.forEach((function(t){return Object.freeze(t)})),Object.freeze(k);var C={name:"app",components:{CiGrid:b},data:function(){return{testData:{},filterTest:"",filterTarget:"",gridColumns:[],gridData:[],gridMeta:{},skipPassed:!1,groupByLang:!0}},created:function(){var t=this,e=this.getPairCompareFunc(k);k.forEach((function(a){return t.addOneJson(a[0],a[1],e)}))},computed:{groupedGridColumns:function(){return this.groupByLang?Array.from(new Set(this.gridColumns.map((function(t){return t.split("/")[0]})))):this.gridColumns},groupedGridData:function(){if(!this.groupByLang)return this.gridData;var t=this.getPairCompareFunc(k);return this.gridData.map((function(e){var a={},s=Object.keys(e).sort(t);return s.forEach((function(t){var s=e[t];if("name"!==t){var r=t.split("/",2);r.length<2&&console.error('target key "'+t+'" is invalid (does not have the format "{lang}/{variant}")');var n=r[0],i=r[1];Object.prototype.hasOwnProperty.call(a,n)||(a[n]={status:s.status,is_kst:s.is_kst,failure:!1,agg_status_set:new Set,agg_results:[]});var o=a[n];"mixed"!==o.status&&s.status!==o.status&&(o.status="mixed"),s.is_kst!==o.is_kst&&(o.is_kst=!1),s.failure&&!o.failure&&(o.failure=!0);var u=o.agg_results.find((function(t){return t.status===s.status&&(!t.failure&&!s.failure||!(!t.failure||!s.failure)&&(t.failure.message===s.failure.message&&t.failure.trace===s.failure.trace))}));if(u)u.variant_names.push(i);else{var c={status:s.status,variant_names:[i]};s.failure&&(c.failure=s.failure),o.agg_results.push(c)}o.agg_status_set.add(s.status)}else a[t]=s})),a}))},groupedGridMeta:function(){if(!this.groupByLang)return this.gridMeta;var t={};return Object.entries(this.gridMeta).forEach((function(e){var a=Object(i["a"])(e,2),s=a[0],r=a[1],n=s.split("/")[0];if(Object.prototype.hasOwnProperty.call(t,n)){var o=t[n];r.timestamp>o.timestamp&&(o.timestamp=r.timestamp)}else t[n]={lang:r.lang,timestamp:r.timestamp,ci:{},kst:0,passed:0}})),this.groupedGridData.forEach((function(e){Object.entries(e).forEach((function(e){var a=Object(i["a"])(e,2),s=a[0],r=a[1];"name"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&("passed"===r.status&&t[s].passed++,r.is_kst&&t[s].kst++)}))})),t}},methods:{addOneJson:function(t,e,a){var s=this,r=t+"/"+e;console.log("Querying data for",r),fetch("https://raw.githubusercontent.com/kaitai-io/ci_artifacts/"+r+"/test_out/"+t+"/ci.json").then((function(t){if(!t.ok)throw new Error("HTTP error, status code: "+t.status);return t.json()})).then((function(e){var n=e.$meta;delete e.$meta,console.log("Got answer for "+r+", meta:",n);var i=0,o=0;for(var u in e){Object.prototype.hasOwnProperty.call(s.testData,u)||(s.testData[u]={name:u});var c=s.testData[u];delete e[u]["name"],c[r]=e[u],"passed"===c[r].status&&i++,c[r].is_kst&&o++}for(var l in s.gridColumns.push(r),s.gridColumns=s.gridColumns.sort(a),s.gridData=[],s.testData)s.gridData.push(s.testData[l]);n.passed=i,n.kst=o,n.timestamp=new Date(n.timestamp),n.artifactsUrl="https://github.com/kaitai-io/ci_artifacts/tree/"+r+"/test_out/"+t,s.gridMeta[r]=n})).catch((function(t){console.warn("Cannot fetch data for "+r+". "+t)}))},getPairCompareFunc:function(t){return function(e,a){var s=function(e){return t.findIndex((function(t){return t.join("/")===e}))};return s(e)-s(a)}}}},j=C,O=(a("034f"),Object(g["a"])(j,r,n,!1,null,null,null)),x=O.exports;s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(x)}}).$mount("#app")},"85ec":function(t,e,a){},c90c:function(t,e,a){},d731:function(t,e,a){"use strict";a("c90c")}});
//# sourceMappingURL=app.feb56ed3.js.map